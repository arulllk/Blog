const Blog=require("../models/blog"),{NotFoundError:NotFoundError,BadRequestError:BadRequestError}=require("../errors"),{uploadOnCloudinary:uploadOnCloudinary}=require("../utils/cloudinary"),fs=require("fs"),createBlog=async(req,res)=>{if(!req.file)throw new BadRequestError("Image is missing",{image:"Image is required"});const{title:title,content:content,topic:topic,seoTitle:seoTitle,seoDescription:seoDescription,image:image,altImage:altImage,slug:slug}=req.body,imgPath=req.file.path,result=await uploadOnCloudinary(imgPath,"Blog"),newBlog=new Blog({title:title,content:content,topic:topic,seoTitle:seoTitle,seoDescription:seoDescription,image:image,altImage:altImage,slug:slug,image:result.secure_url});await newBlog.save(),res.status(201).json({status:"success",message:"Blog created successfully",data:{blog:newBlog}})};module.exports={createBlog:createBlog};